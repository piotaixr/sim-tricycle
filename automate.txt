/*fichier automate*/
robot{

        etat=init{
            transition{
                sinon{
                    etat=normal;
                }
            }
        }
	etat=normal[tag1,tag2]{
            transition{
		si(piece_trouvee()){ piece<-pieceplusproche();
                                    etat=deplacement_norm;
                }
            }
            transition{
		sinon{sleep();
		       etat=normal;
		}
            }
        }
	
	etat=deplacement_norm[tag1]{
            transition{
		si(contains(caseCourante,pieceRecherchee)){ ramasser();
				     etat=porteur;
                }
            }
            transition{
		sinon{allerici(var : piece);
		      etat=normal;
		}
            }
	}
	etat=porteur[tag2]{
            transition{
		etat=deplacement_port;
            }
	}
	etat=deplacement_port[tag2]{
            transition{
		si(case==base){deposer();
				   etat=normal;
			     }
            }
            transition{
		sinon{allerici(ref :team.base);
		      etat=deplacement_port;
		}
            }
	}
        tag=tag1{
            avancer=1;
            reculer=1;
            tourner_droite=1;
            tourner_gauche=1;
        }
        tag=tag2{
            avancer=2;
            reculer=2;
            tourner_droite=1;
            tourner_gauche=1;
        }
}
fin
